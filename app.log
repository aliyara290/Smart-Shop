2025-12-04T01:27:13.689+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h47m52s497ms).
2025-12-04T01:34:48.039+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=7m34s349ms).
2025-12-04T04:51:31.666+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3h16m43s530ms).
2025-12-04T07:33:17.219+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h41m45s650ms).
2025-12-04T08:28:07.683+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=54m50s464ms).
2025-12-04T08:29:37.399+01:00  WARN 33127 --- [SmartShop] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s704ms), soft-evicting connections from pool.
2025-12-04T08:37:01.792+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-5] org.hibernate.SQL                        : select o1_0.id,o1_0.vat,c1_0.id,c1_0.created_at,c1_0.deleted,c1_0.deleted_at,c1_0.loyalty_level,u1_0.id,u1_0.created_at,u1_0.deleted,u1_0.deleted_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role,o1_0.created_at,o1_0.deleted,o1_0.deleted_at,o1_0.discount,o1_0.order_date,pc1_0.id,pc1_0.active,pc1_0.code,pc1_0.created_at,pc1_0.deleted,pc1_0.deleted_at,pc1_0.discount_type,pc1_0.discount_value,pc1_0.end_date,pc1_0.max_usage,pc1_0.used_count,o1_0.remaining,o1_0.status,o1_0.subtotal,o1_0.total from orders o1_0 left join clients c1_0 on c1_0.id=o1_0.client_id and (c1_0.deleted = false) left join users u1_0 on u1_0.id=c1_0.user_id and (u1_0.deleted = false) left join promo_codes pc1_0 on pc1_0.id=o1_0.promo_code_id and (pc1_0.deleted = false) where o1_0.id=? and (o1_0.deleted = false)
2025-12-04T08:37:01.843+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-5] c.a.s.service.impl.PaymentServiceImpl    : cash: null
2025-12-04T08:37:01.859+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-5] org.hibernate.SQL                        : insert into payments (amount,collection_date,created_at,deleted,deleted_at,order_id,payment_date,payment_type,payment_status,id) values (?,?,?,?,?,?,?,?,?,?)
2025-12-04T08:37:01.868+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-5] org.hibernate.SQL                        : insert into transfer_payment (bank_name,created_at,payment_id,reference_number,sender_name,id) values (?,?,?,?,?,?)
2025-12-04T08:37:01.974+01:00  WARN 33127 --- [SmartShop] [http-nio-8081-exec-5] org.hibernate.orm.jdbc.error             : HHH000247: ErrorCode: 0, SQLState: 23505
2025-12-04T08:37:01.974+01:00  WARN 33127 --- [SmartShop] [http-nio-8081-exec-5] org.hibernate.orm.jdbc.error             : ERROR: duplicate key value violates unique constraint "uko8httxib5m1ixvi5wfbyfx52u"
  Detail: Key (reference_number)=(IHCBXE87FY3U) already exists.
2025-12-04T08:37:02.017+01:00  INFO 33127 --- [SmartShop] [http-nio-8081-exec-5] o.h.c.spi.AbstractPersistentCollection   : HHH000496: Detaching an uninitialized collection with queued operations from a session: [com.aliyara.smartshop.model.Order.payments with owner id '85026ada-447f-4547-bde2-bdf39db090b5']
2025-12-04T08:37:25.842+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-6] org.hibernate.SQL                        : select o1_0.id,o1_0.vat,c1_0.id,c1_0.created_at,c1_0.deleted,c1_0.deleted_at,c1_0.loyalty_level,u1_0.id,u1_0.created_at,u1_0.deleted,u1_0.deleted_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role,o1_0.created_at,o1_0.deleted,o1_0.deleted_at,o1_0.discount,o1_0.order_date,pc1_0.id,pc1_0.active,pc1_0.code,pc1_0.created_at,pc1_0.deleted,pc1_0.deleted_at,pc1_0.discount_type,pc1_0.discount_value,pc1_0.end_date,pc1_0.max_usage,pc1_0.used_count,o1_0.remaining,o1_0.status,o1_0.subtotal,o1_0.total from orders o1_0 left join clients c1_0 on c1_0.id=o1_0.client_id and (c1_0.deleted = false) left join users u1_0 on u1_0.id=c1_0.user_id and (u1_0.deleted = false) left join promo_codes pc1_0 on pc1_0.id=o1_0.promo_code_id and (pc1_0.deleted = false) where o1_0.id=? and (o1_0.deleted = false)
2025-12-04T08:37:25.847+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-6] c.a.s.service.impl.PaymentServiceImpl    : cash: null
2025-12-04T08:37:25.848+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-6] org.hibernate.SQL                        : insert into payments (amount,collection_date,created_at,deleted,deleted_at,order_id,payment_date,payment_type,payment_status,id) values (?,?,?,?,?,?,?,?,?,?)
2025-12-04T08:37:25.851+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-6] org.hibernate.SQL                        : insert into transfer_payment (bank_name,created_at,payment_id,reference_number,sender_name,id) values (?,?,?,?,?,?)
2025-12-04T08:38:04.034+01:00 DEBUG 33127 --- [SmartShop] [http-nio-8081-exec-8] org.hibernate.SQL                        : select o1_0.id,o1_0.vat,c1_0.id,c1_0.created_at,c1_0.deleted,c1_0.deleted_at,c1_0.loyalty_level,u1_0.id,u1_0.created_at,u1_0.deleted,u1_0.deleted_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role,o1_0.created_at,o1_0.deleted,o1_0.deleted_at,o1_0.discount,o1_0.order_date,pc1_0.id,pc1_0.active,pc1_0.code,pc1_0.created_at,pc1_0.deleted,pc1_0.deleted_at,pc1_0.discount_type,pc1_0.discount_value,pc1_0.end_date,pc1_0.max_usage,pc1_0.used_count,o1_0.remaining,o1_0.status,o1_0.subtotal,o1_0.total from orders o1_0 left join clients c1_0 on c1_0.id=o1_0.client_id and (c1_0.deleted = false) left join users u1_0 on u1_0.id=c1_0.user_id and (u1_0.deleted = false) left join promo_codes pc1_0 on pc1_0.id=o1_0.promo_code_id and (pc1_0.deleted = false) where o1_0.id=? and (o1_0.deleted = false)
2025-12-04T08:55:27.764+01:00  INFO 33127 --- [SmartShop] [SpringApplicationShutdownHook] o.s.boot.tomcat.GracefulShutdown         : Commencing graceful shutdown. Waiting for active requests to complete
2025-12-04T08:55:27.803+01:00  INFO 33127 --- [SmartShop] [tomcat-shutdown] o.s.boot.tomcat.GracefulShutdown         : Graceful shutdown complete
2025-12-04T08:55:27.834+01:00  INFO 33127 --- [SmartShop] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T08:55:27.863+01:00  INFO 33127 --- [SmartShop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-04T08:55:27.869+01:00  INFO 33127 --- [SmartShop] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-04T08:55:37.267+01:00  INFO 37115 --- [SmartShop] [main] c.a.smartshop.SmartShopApplication       : Starting SmartShopApplication using Java 17.0.17 with PID 37115 (/Users/aliyara/Documents/Java/Spring-Boot/SmartShop/target/classes started by aliyara in /Users/aliyara/Documents/Java/Spring-Boot/SmartShop)
2025-12-04T08:55:37.270+01:00 DEBUG 37115 --- [SmartShop] [main] c.a.smartshop.SmartShopApplication       : Running with Spring Boot v4.0.0, Spring v7.0.1
2025-12-04T08:55:37.270+01:00  INFO 37115 --- [SmartShop] [main] c.a.smartshop.SmartShopApplication       : No active profile set, falling back to 1 default profile: "default"
2025-12-04T08:55:37.847+01:00  INFO 37115 --- [SmartShop] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04T08:55:37.915+01:00  INFO 37115 --- [SmartShop] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59 ms. Found 9 JPA repository interfaces.
2025-12-04T08:55:38.245+01:00  INFO 37115 --- [SmartShop] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8081 (http)
2025-12-04T08:55:38.255+01:00  INFO 37115 --- [SmartShop] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-04T08:55:38.255+01:00  INFO 37115 --- [SmartShop] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.14]
2025-12-04T08:55:38.287+01:00  INFO 37115 --- [SmartShop] [main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 972 ms
2025-12-04T08:55:38.416+01:00  INFO 37115 --- [SmartShop] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04T08:55:38.469+01:00  INFO 37115 --- [SmartShop] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 7.1.8.Final
2025-12-04T08:55:38.855+01:00  INFO 37115 --- [SmartShop] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04T08:55:38.884+01:00  INFO 37115 --- [SmartShop] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-04T08:55:39.029+01:00  INFO 37115 --- [SmartShop] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@340b4f07
2025-12-04T08:55:39.031+01:00  INFO 37115 --- [SmartShop] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-04T08:55:39.065+01:00  WARN 37115 --- [SmartShop] [main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04T08:55:39.087+01:00  INFO 37115 --- [SmartShop] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [jdbc:postgresql://localhost:5432/smartshop_db]
	Database driver: PostgreSQL JDBC Driver
	Database dialect: PostgreSQLDialect
	Database version: 15.14
	Default catalog/schema: smartshop_db/public
	Autocommit mode: undefined/unknown
	Isolation level: READ_COMMITTED [default READ_COMMITTED]
	JDBC fetch size: none
	Pool: DatasourceConnectionProviderImpl
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-04T08:55:40.036+01:00  INFO 37115 --- [SmartShop] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04T08:55:40.303+01:00  INFO 37115 --- [SmartShop] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04T08:55:40.376+01:00  INFO 37115 --- [SmartShop] [main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04T08:55:41.134+01:00  WARN 37115 --- [SmartShop] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-04T08:55:41.438+01:00  INFO 37115 --- [SmartShop] [main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8081 (http) with context path '/'
2025-12-04T08:55:41.443+01:00  INFO 37115 --- [SmartShop] [main] c.a.smartshop.SmartShopApplication       : Started SmartShopApplication in 4.663 seconds (process running for 5.388)
2025-12-04T08:55:53.830+01:00  INFO 37115 --- [SmartShop] [http-nio-8081-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04T08:55:53.831+01:00  INFO 37115 --- [SmartShop] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-04T08:55:53.832+01:00  INFO 37115 --- [SmartShop] [http-nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-04T08:55:53.934+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select o1_0.id,o1_0.vat,o1_0.client_id,o1_0.created_at,o1_0.deleted,o1_0.deleted_at,o1_0.discount,o1_0.order_date,o1_0.promo_code_id,o1_0.remaining,o1_0.status,o1_0.subtotal,o1_0.total from orders o1_0 where (o1_0.deleted = false)
2025-12-04T08:55:53.961+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.created_at,c1_0.deleted,c1_0.deleted_at,c1_0.loyalty_level,u1_0.id,u1_0.created_at,u1_0.deleted,u1_0.deleted_at,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from clients c1_0 left join users u1_0 on u1_0.id=c1_0.user_id and (u1_0.deleted = false) where c1_0.id=? and (c1_0.deleted = false)
2025-12-04T08:55:53.981+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select pc1_0.id,pc1_0.active,pc1_0.code,pc1_0.created_at,pc1_0.deleted,pc1_0.deleted_at,pc1_0.discount_type,pc1_0.discount_value,pc1_0.end_date,pc1_0.max_usage,pc1_0.used_count from promo_codes pc1_0 where pc1_0.id=? and (pc1_0.deleted = false)
2025-12-04T08:55:53.990+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select oi1_0.order_id,oi1_0.id,oi1_0.created_at,p1_0.id,p1_0.created_at,p1_0.deleted,p1_0.deleted_at,p1_0.name,p1_0.stock,p1_0.unit_price,oi1_0.quantity,oi1_0.total_line from order_items oi1_0 left join products p1_0 on p1_0.id=oi1_0.product_id and (p1_0.deleted = false) where oi1_0.order_id=?
2025-12-04T08:55:53.998+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select p1_0.order_id,p1_0.id,p1_0.amount,cp1_0.id,cp1_0.created_at,cp1_0.receipt_number,cp2_0.id,cp2_0.check_number,cp2_0.created_at,cp2_0.due_date,cp2_0.issuer_name,p1_0.created_at,p1_0.deleted,p1_0.deleted_at,p1_0.payment_date,p1_0.payment_type,p1_0.payment_status,tp1_0.id,tp1_0.bank_name,tp1_0.created_at,tp1_0.reference_number,tp1_0.sender_name from payments p1_0 left join cash_payment cp1_0 on p1_0.id=cp1_0.payment_id left join check_payment cp2_0 on p1_0.id=cp2_0.payment_id left join transfer_payment tp1_0 on p1_0.id=tp1_0.payment_id where p1_0.order_id=? and (p1_0.deleted = false)
2025-12-04T08:55:54.008+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select oi1_0.order_id,oi1_0.id,oi1_0.created_at,p1_0.id,p1_0.created_at,p1_0.deleted,p1_0.deleted_at,p1_0.name,p1_0.stock,p1_0.unit_price,oi1_0.quantity,oi1_0.total_line from order_items oi1_0 left join products p1_0 on p1_0.id=oi1_0.product_id and (p1_0.deleted = false) where oi1_0.order_id=?
2025-12-04T08:55:54.011+01:00 DEBUG 37115 --- [SmartShop] [http-nio-8081-exec-2] org.hibernate.SQL                        : select p1_0.order_id,p1_0.id,p1_0.amount,cp1_0.id,cp1_0.created_at,cp1_0.receipt_number,cp2_0.id,cp2_0.check_number,cp2_0.created_at,cp2_0.due_date,cp2_0.issuer_name,p1_0.created_at,p1_0.deleted,p1_0.deleted_at,p1_0.payment_date,p1_0.payment_type,p1_0.payment_status,tp1_0.id,tp1_0.bank_name,tp1_0.created_at,tp1_0.reference_number,tp1_0.sender_name from payments p1_0 left join cash_payment cp1_0 on p1_0.id=cp1_0.payment_id left join check_payment cp2_0 on p1_0.id=cp2_0.payment_id left join transfer_payment tp1_0 on p1_0.id=tp1_0.payment_id where p1_0.order_id=? and (p1_0.deleted = false)
